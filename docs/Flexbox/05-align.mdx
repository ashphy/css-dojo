import dedent from 'ts-dedent';

import { FlexContainer } from './components/flex-container';
import { FlexItem } from './components/flex-items';
import { FlexItemFixed } from './components/flex-items-fixed';
import { FlexAlignDemo } from './components/flex-align-demo';
import { Playground } from './components/playground';
import { TargetLayout } from './components/target-layout';

import exercise_1_style from './exercises/exercise-1.module.css';
import exercise_1_2_style from './exercises/exercise-1-2.module.css';
import exercise_3_style from './exercises/exercise-3.module.css';

# フレックスボックスの配置制御

フレックスボックスの配置制御は、**justify-content** と **align-items** の2つの主要なプロパティによって行われます。

## 軸と配置の関係

フレックスボックスでは、配置を制御する際に**主軸（main axis）** と **交差軸（cross axis）** を意識することが重要です。

- **justify-content**: 主軸方向（通常は水平方向）のアイテム配置を制御
- **align-items**: 交差軸方向（通常は垂直方向）のアイテム配置を制御

![flexbox配置の基本概念](./assets/flex-axis.drawio.svg)

## justify-content: 主軸方向の配置

**justify-content** プロパティは、フレックスアイテムを主軸方向にどのように配置するかを指定します。
余剰スペースがある場合の分配方法を制御できます。

```css title="CSS"
.flex-container {
  display: flex;
  justify-content: center; /* アイテムを中央に配置 */
}
```

### justify-content の値

#### flex-start（デフォルト）

アイテムを主軸の開始位置に配置します。

```css title="CSS"
.flex-container {
  justify-content: flex-start;
}
```

<FlexContainer style={{ justifyContent: 'flex-start' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

#### flex-end

アイテムを主軸の終了位置に配置します。

```css title="CSS"
.flex-container {
  justify-content: flex-end;
}
```

<FlexContainer style={{ justifyContent: 'flex-end' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

#### center

アイテムを主軸の中央に配置します。

```css title="CSS"
.flex-container {
  justify-content: center;
}
```

<FlexContainer style={{ justifyContent: 'center' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

#### space-between

最初のアイテムを開始位置に、最後のアイテムを終了位置に配置し、残りのアイテムを等間隔で配置します。

```css title="CSS"
.flex-container {
  justify-content: space-between;
}
```

<FlexContainer style={{ justifyContent: 'space-between' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

#### space-around

各アイテムの周りに等しいスペースを配置します。アイテム間のスペースは、端のスペースの2倍になります。

```css title="CSS"
.flex-container {
  justify-content: space-around;
}
```

<FlexContainer style={{ justifyContent: 'space-around' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

#### space-evenly

すべてのスペース（アイテム間、端）を等しく配置します。

```css title="CSS"
.flex-container {
  justify-content: space-evenly;
}
```

<FlexContainer style={{ justifyContent: 'space-evenly' }}>
    <FlexItemFixed>アイテム 1</FlexItemFixed>
    <FlexItemFixed>アイテム 2</FlexItemFixed>
    <FlexItemFixed>アイテム 3</FlexItemFixed>
</FlexContainer>

## align-items: 交差軸方向の配置

**align-items** プロパティは、フレックスアイテムを交差軸方向にどのように配置するかを指定します。
アイテムの高さが異なる場合の配置方法を制御できます。

```css title="CSS"
.flex-container {
  display: flex;
  align-items: center; /* アイテムを交差軸の中央に配置 */
}
```

### align-items の値

#### stretch（デフォルト）

アイテムをコンテナの高さいっぱいに伸ばします。

```css title="CSS"
.flex-container {
  align-items: stretch;
}
```

<FlexContainer style={{ alignItems: 'stretch', height: '160px' }}>
    <FlexItem>アイテム 1</FlexItem>
    <FlexItem>アイテム 2<br/>（複数行）</FlexItem>
    <FlexItem>アイテム 3</FlexItem>
</FlexContainer>

#### flex-start

アイテムを交差軸の開始位置に配置します。

```css title="CSS"
.flex-container {
  align-items: flex-start;
}
```

<FlexContainer style={{ alignItems: 'flex-start', height: '160px' }}>
    <FlexItem>アイテム 1</FlexItem>
    <FlexItem style={{ padding: '20px 10px' }}>アイテム 2<br/>（高さ異なる）</FlexItem>
    <FlexItem>アイテム 3</FlexItem>
</FlexContainer>

#### flex-end

アイテムを交差軸の終了位置に配置します。

```css title="CSS"
.flex-container {
  align-items: flex-end;
}
```

<FlexContainer style={{ alignItems: 'flex-end', height: '160px' }}>
    <FlexItem>アイテム 1</FlexItem>
    <FlexItem style={{ padding: '20px 10px' }}>アイテム 2<br/>（高さ異なる）</FlexItem>
    <FlexItem>アイテム 3</FlexItem>
</FlexContainer>

#### center

アイテムを交差軸の中央に配置します。

```css title="CSS"
.flex-container {
  align-items: center;
}
```

<FlexContainer style={{ alignItems: 'center', height: '160px' }}>
    <FlexItem>アイテム 1</FlexItem>
    <FlexItem style={{ padding: '20px 10px' }}>アイテム 2<br/>（高さ異なる）</FlexItem>
    <FlexItem>アイテム 3</FlexItem>
</FlexContainer>

#### baseline

アイテムのベースライン（文字のベースライン）を揃えて配置します。

```css title="CSS"
.flex-container {
  align-items: baseline;
}
```

<FlexContainer style={{ alignItems: 'baseline', height: '120px' }}>
    <FlexItem style={{ fontSize: '14px' }}>小さい文字</FlexItem>
    <FlexItem style={{ fontSize: '24px', padding: '10px' }}>大きい文字</FlexItem>
    <FlexItem style={{ fontSize: '18px' }}>中くらい</FlexItem>
</FlexContainer>

## flex-direction との関係

justify-content は主軸の方向の配置、align-items は交差軸の方向の配置を制御しますので、
flex-direction の値によって影響を与える方向が変わります。

### 試してみよう

flex-direction、justify-content と align-items の組み合わせを試してみましょう。

<FlexAlignDemo />

## 演習課題

### 課題1: 水平中央配置

3つの要素を横一列に並べ、コンテナの中央に配置してください。

**要件:**
- 3つの要素が水平方向に並んでいる
- 要素全体がコンテナの中央に配置されている
- 要素間に適度な余白がある

<TargetLayout> 
  <div className={exercise_1_style.container}>
    <div className={exercise_1_style.item}>アイテム1</div>
    <div className={exercise_1_style.item}>アイテム2</div>
    <div className={exercise_1_style.item}>アイテム3</div>
  </div>
</TargetLayout>

<Playground
  htmlCode={dedent`<div class="container">
    <div class="item">アイテム1</div>
    <div class="item">アイテム2</div>
    <div class="item">アイテム3</div>
  </div>`}
  cssCode={dedent`.container {
    height: 200px;
    background-color: #f0f0f0;
    border: 2px solid #ccc;
    /* ここにFlexboxのプロパティを追加してください */
  }

  .item {
    background-color: #007bff;
    color: white;
    padding: 15px 20px;
    border-radius: 5px;
  }`}
/>

<details>
<summary>解答例を見る</summary>

```css
.container {
  height: 200px;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}
```

</details>

### 課題2: 完全中央配置

1つの要素をコンテナの完全な中央（水平・垂直ともに中央）に配置してください。

<TargetLayout style={{ height: "200px" }}>
  <div className={exercise_1_2_style.container}>
    <div className={exercise_1_2_style.item}>中央に配置</div>
  </div>
</TargetLayout>

<Playground
  htmlCode={`<div class="container">
  <div class="item">中央に配置</div>
</div>`}
  cssCode={`.container {
  height: 200px;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  /* ここにFlexboxのプロパティを追加してください */
}

.item {
  background-color: #28a745;
  color: white;
  padding: 20px 30px;
  border-radius: 8px;
  font-weight: bold;
}`}
/>

<details>
<summary>解答例を見る</summary>

```css
.container {
  height: 200px;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  display: flex;
  justify-content: center;
  align-items: center;
}
```

</details>

### 課題3: 縦並び配置

3つの要素を縦一列に並べ、中央に配置してください。

<TargetLayout style={{ height: "300px" }}>
  <div className={exercise_3_style.container}>
    <div className={exercise_3_style.item}>上</div>
    <div className={exercise_3_style.item}>中央</div>
    <div className={exercise_3_style.item}>下</div>
  </div>
</TargetLayout>

<Playground
  htmlCode={`<div class="container">
  <div class="item">上</div>
  <div class="item">中央</div>
  <div class="item">下</div>
</div>`}
  cssCode={`.container {
  height: 300px;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  /* ここにFlexboxのプロパティを追加してください */
}

.item {
  background-color: #dc3545;
  color: white;
  padding: 15px 25px;
  border-radius: 5px;
  text-align: center;
}`}
/>

<details>
<summary>解答例を見る</summary>

```css
.container {
  height: 300px;
  background-color: #f0f0f0;
  border: 2px solid #ccc;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 15px;
}
```

</details>